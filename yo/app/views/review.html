<div zth-navigation></div>

<div class="main-panel">
<div class="center-column">
<div class="videogular-container">
	<videogular vg-player-ready="onPlayerReady($API)" class="videogular">
		<vg-media vg-src="sources">
		</vg-media>

		<vg-controls class="controls">
			<vg-play-pause-button></vg-play-pause-button>
			<vg-time-display>{{ currentTime | date:'mm:ss' }}</vg-time-display>
			<vg-scrub-bar>
				<vg-scrub-bar-current-time></vg-scrub-bar-current-time>
			</vg-scrub-bar>
			<vg-time-display>{{ totalTime | date:'mm:ss' }}</vg-time-display>
			<vg-playback-button></vg-playback-button>
			<vg-volume>
				<vg-mute-button></vg-mute-button>
				<vg-volume-bar></vg-volume-bar>
			</vg-volume>
			<vg-fullscreen-button></vg-fullscreen-button>
		</vg-controls>

		<vg-overlay-play></vg-overlay-play>
	</videogular>
</div>
<hr/>
<div class="container-fluid">
	<div class="row">
		<div class="col-md-3">
			<div><span class="label label-primary">{{review.sport}}</span></div>
			<span>{{review.author}}</span>
		</div>
		<div class="col-md-6">
			<h1 class="video-title">{{review.title}}</h1>
			<div class="videoDescription" ng-readonly="true">{{review.description}}</div>
		</div>
		<div class="col-md-3 text-right">
			<button type="button" class="btn btn-danger" ng-click="showProModal()" >Ask a Pro
			</button>
		</div>
	</div>
</div>
<hr/>
<div ng-show="selectedCoach">
	<div class="alert alert-info">{{selectedCoach.name}} has been notified of your request. They will get back to you soon. Stay tuned!</div>
	<hr/>
</div>

<form name="commentForm">
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-3">
				<div class="form-group" show-errors="{ showSuccess: true }">
					<div zth-name-input>&nbsp;</div>
				</div>
			</div>
			<div class="col-md-9">
				<div class="form-group" show-errors="{ showSuccess: true }">
					<textarea placeholder="{{'Help ' + review.author + '?'}}" ng-model="commentText" class="form-control" ng-required="true"></textarea>
				</div>
				<div class="text-right">
					<a class="link-minor" ng-click="showHelp = true" ng-show="!showHelp">Show formatting help</a>
					<a class="link-minor" ng-click="showHelp = false" ng-show="showHelp">Hide formatting help</a>
					<button ng-click="addComment()" class="btn btn-default text-right">Add comment</button>
				</div>
				<div ng-show="showHelp">
					<p>You can use <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">Markdow syntax</a> to format your text</p>
					<p>Additionally, you can:
						<ul>
							<li>Enter time information in the form mm:ss to create a link to directly go to the specified time in the video (e.g. 01:21 will create a link to go to 1 min 21 seconds into the video)</li>
							<li>Add +p after a time information to automatically start playing the video at that time when clicking on the link</li>
							<li>Or add +s to start playing in slow motion (half speed)</li>
							<li>Or add +s with a number to specify the video playback rate. For instance, +s0.25 will play the video at quarter the speed, while +s2 will play it at double the speed</li>
						</ul>
					</p>	
				</div>
			</div>
		</div>
	</div>
</form>

<div ng-repeat="comment in review.comments" class="container-fluid comment-block">
	<div class="comment-header">
		<span class="comment-author">{{comment.author}}</span>
		<span><small>{{formatDate(comment)}}</small></span>
		<a ng-click="startEditing(comment)" class="link-minor" ng-show="comment.id"> - Edit</a>
	</div>
	<div class="comment-body">
		<div compilecontent content="comment.markedText" ng-hide="comment.editing">
		</div>
		<div ng-show="comment.editing">
			<textarea class="form-control" ng-model="comment.text"></textarea>
			<div class="text-right">
				<button ng-click="cancelUpdateComment(comment)" class="btn btn-default btn-xs">Cancel</button>
				<button ng-click="updateComment(comment)" class="btn btn-default btn-xs">Update</button>
			</div>
		</div>
	</div>
</div>
</div>
</div>