<div class="modal" tabindex="-1" role="dialog">
	<div class="modal-dialog sequence-modal">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" ng-click="close()">&times;</button>
				<h4 class="modal-title">Adding a side-by-side comparison</h4>
			</div>
			<div class="modal-body">
			
				<span>Use a sequence from:</span>
				<label class="radio-inline">
					<input type="radio" name="sequenceSource" id="sequenceSource1" value="sameVideo" ng-model="params.comparisonSource" ng-click="toggleMode('sameVideo')">
					this video
				</label>
				<label class="radio-inline">
					<input type="radio" name="sequenceSource" id="sequenceSource2" value="otherVideo" ng-model="params.comparisonSource" ng-click="toggleMode('otherVideo')">
					another video
				</label>
				<label class="radio-inline">
					<input type="radio" name="sequenceSource" id="sequenceSource3" value="sequence" ng-model="params.comparisonSource"  ng-click="toggleMode('sequence')">
					an existing sequence
				</label>

				<videogular vg-player-ready="onPlayerReady($API)" class="videogular" vg-update-time="onUpdateTime($currentTime, $duration)">
					<div class="first-player-container">
						<vg-media vg-src="sources" class="first-player" ng-class="params.firstPlayerClass"></vg-media>
					</div>

					<vg-controls>
						<vg-play-pause-button></vg-play-pause-button>
						<vg-time-display>{{ currentTime | date:'mm:ss:sss' }}</vg-time-display>
						<vg-scrub-bar video-fine-time-control="moveTime1(amountInMilliseconds)">
							<vg-scrub-bar-current-time></vg-scrub-bar-current-time>
						</vg-scrub-bar>
						<vg-time-display>{{ totalTime | date:'mm:ss' }}</vg-time-display>
						<vg-volume>
							<vg-mute-button></vg-mute-button>
							<vg-volume-bar></vg-volume-bar>
						</vg-volume>
					</vg-controls>

					<div class="second-player-container">
						<div class="second-player">
							<videogular vg-player-ready="onPlayerReady2($API)" class="videogular" ng-hide="choosingOtherVideo">
								<vg-media vg-src="sources2" ng-class="params.secondPlayerClass">
								</vg-media>

								<vg-controls>
									<vg-play-pause-button></vg-play-pause-button>
									<vg-time-display>{{ currentTime | date:'mm:ss:sss' }}</vg-time-display>
									<vg-scrub-bar video-fine-time-control="moveTime2(amountInMilliseconds)">
										<vg-scrub-bar-current-time></vg-scrub-bar-current-time>
									</vg-scrub-bar>
									<vg-time-display>{{ totalTime | date:'mm:ss' }}</vg-time-display>
									<vg-volume>
										<vg-mute-button></vg-mute-button>
										<vg-volume-bar></vg-volume-bar>
									</vg-volume>
								</vg-controls>
							</videogular>

							<div class="other-video-choice" ng-show="choosingOtherVideo">
								<h3 class="choice-title">Choose an existing video</h3>

								<table class="table video-listing">
									<tbody>
										<tr ng-repeat="video in videos">
											<td class="vert-align info-column">
												<div class="row review-title">
													<div class="col-sm-12">
														<h3 class="video-listing-title">{{video.title}}</h3>
													</div>
												</div>
												<div class="row" ng-show="video.tags">
													<div class="col-sm-12">
														<tags-input ng-model="video.tags" ng-disabled="true" class="sport-tags ti-input-sm" replace-spaces-with-dashes="false"></tags-input>
													</div>
												</div>
											</td>
											<td class="vert-align">
												<button class="btn btn-default" ng-click="selectVideo(video)">Select</button>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</videogular>

				<div class="row position-select">
					<div class="col-md-6 text-center">
						<span>Use: </span>
						<label class="radio-inline">
							<input type="radio" name="video1position" id="video1position1" value="l" ng-model="params.video1position">
							left side
						</label>
						<label class="radio-inline">
							<input type="radio" name="video1position" id="video1position2" value="c" ng-model="params.video1position">
							center
						</label>
						<label class="radio-inline">
							<input type="radio" name="video1position" id="video1position3" value="r" ng-model="params.video1position">
							right side
						</label>
					</div>
					<div class="col-md-6 text-center">
						<span>Use: </span>
						<label class="radio-inline">
							<input type="radio" name="video2position" id="video2position1" value="l" ng-model="params.video2position">
							left side
						</label>
						<label class="radio-inline">
							<input type="radio" name="video2position" id="video2position2" value="c" ng-model="params.video2position">
							center
						</label>
						<label class="radio-inline">
							<input type="radio" name="video2position" id="video2position3" value="r" ng-model="params.video2position">
							right side
						</label>
					</div>
				</div>

				<form class="form-inline sequence-form text-center" name="sequenceForm">
					<div class="form-group speed-factor" show-errors="{ showSuccess: true }">
						<label for="speedFactor">Playback speed</label>
						<input name="speed" type="text" class="form-control text-right" id="speedFactor" ng-model="params.speed" placeholder="0.5" ng-required="true">
					</div>
					<div class="form-group loop-duration" show-errors="{ showSuccess: true }">
						<label for="loopDuration">Loop duration</label>
						<input name="loopDuration" type="text" class="form-control text-right" id="loopDuration" ng-model="params.loopDuration" placeholder="1" ng-required="true">
						s
					</div>
					<button type="button" class="btn btn-default test-button" ng-click="testSequence()" ng-hide="testing">Test this sequence</button>
					<button type="button" class="btn btn-default test-button" ng-click="stopSequence()" ng-show="testing">Stop test</button>
				</form>
			</div>
			<div class="modal-footer">
				<form name="form.createSequenceForm" class="form-inline create-sequence-form" ng-show="params.comparisonSource == 'otherVideo' && !choosingOtherVideo">
					<p class="text-left">We'll add this sequence to the list of existing sequences, so that others can easily find and use it too. We'd love it if you could fill in the fields below to help them find it more easily :)</p>
					<div class="row text-left">
						<div class="form-group sequence-title col-md-6" show-errors="{ showSuccess: true }">
							<input name="createSequenceForm.title" type="text" class="form-control" id="sequenceTitle" ng-model="params.newSequenceTitle" placeholder="A descriptive title that makes finding it easy" ng-required="true">
						</div>
						<div class="form-group sequence-tags col-md-6">
							<tags-input ng-model="params.newSequenceTags" placeholder="Add at least one tag" add-from-autocomplete-only="true" spellcheck="false" ng-required="allowedTags && allowedTags.length > 0" class="form-group" replace-spaces-with-dashes="false">
								<auto-complete source="autocompleteTag($query.toLowerCase())" min-length="1" load-on-empty="true" load-on-focus="true" max-results-to-show="20"></auto-complete>
							</tags-input>
						</div>
					</div>
					<button type="submit" class="btn btn-primary" ng-click="addSequence()" ng-disabled="form.createSequenceForm.$invalid">{{params.comparisonSource == 'otherVideo' ? 'Create and add sequence' : 'Add sequence'}}</button>
					<button type="button" class="btn btn-default" ng-click="close()">Cancel</button>
				</form>
				<button type="submit" class="btn btn-primary" ng-click="addSequence()" ng-show="params.comparisonSource != 'otherVideo' || choosingOtherVideo">{{params.comparisonSource == 'otherVideo' ? 'Create and add sequence' : 'Add sequence'}}</button>
				<button type="button" class="btn btn-default" ng-click="close()"ng-show="params.comparisonSource != 'otherVideo' || choosingOtherVideo">Cancel</button>
			</div>
		</div>
	</div>
</div>