<div zth-navigation></div>

<div class="main-panel">
<div class="center-column">

<div class="videogular-container keep-on-top multi-player">
	<videogular vg-player-ready="onPlayerReady($API)" vg-update-state="onVideoStateUpdate($state)" class="videogular" vg-update-time="onUpdateTime($currentTime, $duration)">
		<vg-media vg-src="sources" ng-class="playerControls.firstPlayerClass">
		</vg-media>

		<vg-controls>
			
			<vg-play-pause-button ng-click="playerControls.playPauseSecondPlayer()"></vg-play-pause-button>
			<vg-time-display>{{ currentTime | date:'mm:ss:sss' }}</vg-time-display>
			<vg-scrub-bar video-fine-time-control>
				<vg-scrub-bar-current-time></vg-scrub-bar-current-time>
			</vg-scrub-bar>
			<vg-time-display>{{ totalTime | date:'mm:ss' }}</vg-time-display>
			<video-playback-button></video-playback-button>
			<video-loop-button ng-show="playerControls.loopStatus"></video-loop-button>
			<video-dual-mode-button ng-show="playerControls.mode == 2"></video-dual-mode-button>
			<vg-volume>
				<vg-mute-button></vg-mute-button>
				<vg-volume-bar></vg-volume-bar>
			</vg-volume>
			<vg-fullscreen-button></vg-fullscreen-button>
		</vg-controls>

		<div class="videogular-container second-player" ng-class="playerControls.secondPlayerClass" ng-show="playerControls.mode == 2">
			<videogular vg-player-ready="onSecondPlayerReady($API)" class="videogular">
				<vg-media vg-src="sources2">
				</vg-media>
			</videogular>
		</div>

		
		<vg-overlay-play ng-click="playerControls.playPauseSecondPlayer()"></vg-overlay-play>
	</videogular>
</div>

<div scrollable>
	<form class="container-fluid">
		<div class="row">
			<div class="col-md-2">
				<span><h4 class="text-left">{{review.author}}</h4></span>
			</div>
			<div class="col-md-10">
				<div>
					<span class="label label-primary pull-right"  ng-show="!review.editing" ng-model="review.sport.value">{{review.sport.value}}</span>
				</div>
			</div>
			<div class="col-md-6" ng-show="review.editing"></div>
			<div class="col-md-4" ng-show="review.editing">
				<div>
					<div class="form-group" show-errors="{ showSuccess: true }">
					    <select ng-model="review.sportForDisplay" name="sport" class="form-control" ng-required="true">
							<option value="Squash">Squash</option>
							<option value="Badminton">Badminton</option>
							<option value="LeagueOfLegends">League of Legends</option>
							<option value="HeroesOfTheStorm">Heroes of the Storm</option>
							<option value="HearthStone">HearthStone</option>
							<option value="Other">Other</option>
						</select>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-10">
				<h2 class="video-title" ng-show="!review.editing" ng-model="review.title">{{review.title}}</h2>
				<div class="form-group" show-errors="{ showSuccess: true }" ng-show="review.editing">
			    	<input type="text" name="title" class="form-control" ng-model="review.title" placeholder="Title of your video review" ng-required="true">
			  	</div>
				<div compilecontent content="review.markedText" ng-hide="review.editing" class="videoDescription"></div>
				<toolbar ng-show="review.editing">
					<textarea class="form-control" ng-model="review.description" auto-grow toolbar-target></textarea>
				</toolbar>
			</div>
			<div ng-show="!!coaches.length" class="col-md-2 text-right">
				<button type="button" class="btn btn-danger" ng-click="showProModal()" >Ask a Pro
				</button>
			</div>
		</div>
		<div class="row">
			<div class="col-md-10 text-left">
				<a ng-click="startEditingInformation()" class="link-minor" ng-show="!review.editing && User.getName() == review.author"> Edit information</a>
				<div ng-show="review.editing">
					<button ng-click="cancelUpdateDescription()" class="btn btn-default btn-xs">Cancel</button>
					<button ng-click="updateDescription()" class="btn btn-default btn-xs">Update</button>
				</div>
			</div>
			<div class="col-md-2">
  				<span class="glyphicon glyphicon-thumbs-up" ng-class="{'upvote':review.reputation.hasCurrentUserVoted.Upvote}" ng-click="upvoteReview()" aria-hidden="true">{{review.reputation.nbVotes.Upvote}} </span> 
  				<span class="glyphicon glyphicon-thumbs-down" ng-class="{'downvote':review.reputation.hasCurrentUserVoted.Downvote}" ng-click="downvoteReview()" aria-hidden="true">{{review.reputation.nbVotes.Downvote}} </span> 
			</div>
		</div>
	</form>
	<div ng-show="selectedCoach">
		<hr/>
		<div class="alert alert-info">{{selectedCoach.name}} has been notified of your request. They will get back to you soon. Stay tuned!</div>
	</div>
	<form name="commentForm">
		<hr/>
		<div class="container-fluid comment-block main-block">
			<div class="row">
				<div class="col-md-2" ng-show="!User.isLoggedIn()">
					<div class="form-group" show-errors="{ showSuccess: true }">
						<input type="text" name="author" class="form-control" ng-model="newComment.author" placeholder="Your name" ng-required="!User.isLoggedIn()">
					</div>
				</div>
				<div ng-class="{'col-md-10': !User.isLoggedIn(), 'col-md-12': User.isLoggedIn()}">
					<toolbar class="form-group" show-errors="{ showSuccess: true }">
						<textarea placeholder="{{'Help ' + review.author + '?'}}" name="commentText" ng-model="newComment.text" class="form-control" ng-required="true" auto-grow toolbar-target></textarea>
					</toolbar>
					<div>
						<div class="inline-block">
							<button ng-click="addComment()" class="btn btn-default text-right">Add comment</button>
							<button ng-click="cancelComment()" class="btn btn-default text-right">Cancel</button>
						</div>
						<div class="inline-block float-right">
							<a class="link-minor" ng-click="showHelp = true" ng-show="!showHelp">Show formatting help</a>
							<a class="link-minor" ng-click="showHelp = false" ng-show="showHelp">Hide formatting help</a>
						</div>
					</div>
					<div ng-show="showHelp" ng-include="'/templates/formattingHelp.html'"></div>
				</div>
			</div>
		</div>
	</form>
	<comment ng-repeat="comment in review.comments" comment="comment" indentation-level="0"></comment>
	<!-- Prevent scrolling center area if we're already at the bottom -->
	<div id="padder"></div>
	<div id="bottom"></div>
</div>
</div>
</div>